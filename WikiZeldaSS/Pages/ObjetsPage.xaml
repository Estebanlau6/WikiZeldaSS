<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:WikiZeldaSS.ViewModels"
             xmlns:model="clr-namespace:WikiZeldaSS.Models"
             x:Class="WikiZeldaSS.Pages.ObjetsPage"
             BackgroundColor="#1a1a2e">
    <ScrollView>
        <VerticalStackLayout Spacing="15" Padding="20">

            <Label Text="Objets de Skyward Sword"
               FontSize="28"
               FontAttributes="Bold"
               TextColor="#ffd700"
               HorizontalOptions="Center"
               Margin="0,10,0,10" />

            <CollectionView x:Name="ObjetsCollectionView"
                        SelectionMode="Single"
                        ItemsSource="{Binding Objets}"
                        SelectionChangedCommand="{Binding OpenDetailPageCommand}"
                        SelectionChangedCommandParameter="{Binding SelectedItem, Source={x:Reference ObjetsCollectionView}}">

                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" ItemSpacing="0"/>
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="model:Objet">

                        <Border Stroke="#ffd700"
                            StrokeThickness="1"
                            StrokeShape="RoundRectangle 20"
                            BackgroundColor="#0d1321"
                            Padding="15"
                            Margin="10">

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">

                                    <VisualState x:Name="Normal" />

                                    <VisualState x:Name="Selected">
                                        <VisualState.Setters>
                                        </VisualState.Setters>
                                    </VisualState>

                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <VerticalStackLayout Spacing="15">

                                <Label Text="{Binding Emoji}" 
                                   FontSize="40"
                                   HorizontalOptions="Center" />

                                <Label Text="{Binding Nom}"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="{Binding Couleur}"
                                   HorizontalOptions="Center" />

                                <BoxView HeightRequest="2" Color="#ffd700" />

                                <Border Stroke="#ffd700"
                                    StrokeThickness="2"
                                    StrokeShape="RoundRectangle 15"
                                    BackgroundColor="#0d1321"
                                    Padding="0"
                                    HorizontalOptions="Center">

                                    <Image Source="{Binding Image}"
                                       Aspect="AspectFit" 
                                       MaximumHeightRequest="180" 
                                       MaximumWidthRequest="280" 
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center" />
                                </Border>

                                <Label Text="{Binding DescriptionCourt}"
                                   FontSize="14"
                                   TextColor="White"
                                   LineBreakMode="WordWrap"
                                   HorizontalOptions="Start" />
                            </VerticalStackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
